<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      /* Keep all existing styles */
      body {
        background-color: #1a1a1a;
        margin: 0;
        padding: 20px;
        font-family: Arial, sans-serif;
        overflow-x: hidden;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        color: white;
        flex-wrap: wrap;
        gap: 10px;
      }

      .quantity-display {
        position: absolute;
        top: 5px;
        right: 5px;
        background: gold; /* Change this to your preferred color */
        color: black; /* Change this to your preferred text color */
        font-size: 14px; /* Adjust font size as needed */
        padding: 2px 5px; /* Add padding for a nicer look */
        border-radius: 4px; /* Rounded corners */
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 25px; /* Minimum width to fit one digit */
        max-width: 40px; /* Maximum width to fit three digits */
        text-align: center; /* Center text */
        font-weight: bold;
      }

      .search-box {
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #4a4a4a;
        background: #2a2a2a;
        color: white;
        width: 200px;
      }

      .cart-icon {
        position: relative;
        cursor: pointer;
        padding: 8px;
        background: #2a2a2a;
        border-radius: 4px;
      }

      .cart-count {
        position: absolute;
        top: -8px;
        right: -8px;
        background: red;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
      }

      .modal-content {
        background: #2a2a2a;
        margin: 5% auto;
        width: 80%;
        max-width: 600px;
        border-radius: 8px;
        color: white;
        display: flex;
        flex-direction: column;
        max-height: 90vh;
      }

      .modal-header {
        padding: 20px 20px 10px 20px;
        border-bottom: 1px solid #4a4a4a;
      }

      .modal-body {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        max-height: none;
      }

      .close {
        float: right;
        cursor: pointer;
        font-size: 24px;
      }

      .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #4a4a4a;
      }

      .checkout-btn {
        background: #4caf50;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 20px;
      }

      .scroll-container {
        width: 100%;
        overflow-x: auto;
        padding-bottom: 12px;
      }

      /* Updated grid container for responsiveness */
      .grid-container {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
        padding: 4px;
        justify-content: flex-start;
      }

      .item-card {
        background-color: #2a2a2a;
        border-radius: 4px;
        overflow: hidden;
        position: relative;
        cursor: pointer;
        width: 130px; /* Fixed width as per original design */
        flex: 0 0 130px; /* Prevent growing or shrinking */
        margin-bottom: 4px;
      }

      .item-image {
        width: 100%;
        height: 80px;
        background-color: #333;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative; /* Added for gem positioning */
      }

      .item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      /* New gem display styles */
      .gem-display {
        position: absolute;
        top: 2px;
        right: 2px;
        width: 30px;
        height: 30px;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
      }

      .gem-display img {
        width: 30px;
        height: 30px;
        border-radius: 4px;
        /*object-fit: contain;*/
      }

      .item-info {
        padding: 6px;
        text-align: center;
      }

      .item-name {
        color: #fff;
        font-size: 13px;
        margin: 0 0 2px 0;
        line-height: 1.2;
        height: 2.4em;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        text-align: center;
      }

      .item-price {
        background-color: #000;
        border: 1px solid #fff;
        color: #fff;
        font-size: 16px;
        margin: 4px auto;
        padding: 2px 8px;
        border-radius: 4px;
        display: inline-flex;
        align-items: center;
        gap: 2px;
      }

      .item-price::before {
        content: "P";
        font-size: 14px;
      }

      .scroll-container::-webkit-scrollbar {
        height: 8px;
      }

      .scroll-container::-webkit-scrollbar-track {
        background: #1a1a1a;
        border-radius: 4px;
      }

      .scroll-container::-webkit-scrollbar-thumb {
        background: #4a4a4a;
        border-radius: 4px;
      }

      .scroll-container::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Cart item image */
      .cart-item-image {
        width: 40px;
        height: 40px;
        object-fit: cover;
        border-radius: 4px;
        margin-right: 10px;
      }

      /* Adjust cart item layout */
      .cart-item {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #4a4a4a;
      }

      .cart-item-details {
        flex-grow: 1;
        margin-right: 10px;
      }

      /* Scrollbar styling for modal body */
      .modal-body::-webkit-scrollbar {
        width: 8px;
      }

      .modal-body::-webkit-scrollbar-track {
        background: #1a1a1a;
        border-radius: 4px;
      }

      .modal-body::-webkit-scrollbar-thumb {
        background: #4a4a4a;
        border-radius: 4px;
      }

      .modal-body::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Media queries for responsive header */
      @media (max-width: 768px) {
        .header {
          flex-direction: column;
          align-items: flex-start;
        }

        .timestamp {
          margin-bottom: 10px;
          width: 100%;
        }

        .search-box {
          width: 100%;
          box-sizing: border-box;
          margin-bottom: 10px;
        }

        .hero-filter {
          width: 100%;
          margin-left: 0;
          margin-bottom: 10px;
        }

        .hero-filter select {
          width: 100%;
          box-sizing: border-box;
        }

        .cart-icon {
          align-self: flex-end;
        }

        /* Make modal content fill more of the screen on mobile */
        .modal-content {
          width: 90%;
          margin: 5% auto;
          padding: 0;
        }

        .modal-header {
          padding: 15px 15px 10px 15px;
        }

        .modal-body {
          padding: 0 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div
        class="timestamp"
        style="display: flex; align-items: center; gap: 10px"
      >
        <!--[1]-->
        Last update: <span id="updateTimeText" style="cursor: pointer;" onclick="showTimeInput()">November, 11 2025 09:44 pm</span>

        

        <input
          type="text"
          id="updateTimeInput"
          class="search-box"
          style="display: none; width: 200px"
          placeholder="e.g., January, 18 2025 10:37 am"
          onblur="hideTimeInput()"
          onkeypress="handleKeyPress(event)"
        />
      </div>
      <input
        type="text"
        class="search-box"
        placeholder="Search items..."
        id="searchBox"
      />

      <div class="hero-filter" style="margin-left: 10px">
        <select id="heroFilter" class="search-box" style="cursor: pointer">
          <option value="all">All Heroes</option>
          <option value="Cosmic Heroes Hoard Treasure">Cosmic Heroes Hoard Treasure</option>
          <option value="Crownfall 2024 Collectors Cache">Crownfall 2024 Collectors Cache</option>
          <option value="Crownfall 2024 Collectors Cache II">Crownfall 2024 Collectors Cache II</option>
          <option value="Dead Reckoning Chest">Dead Reckoning Chest</option>
          <option value="Frostivus 2017 Treasure">Frostivus 2017 Treasure</option>
          <option value="Treasure of the Forgotten Myth">Treasure of the Forgotten Myth</option>
          <option value="Treasure of the Onyx Eye">Treasure of the Onyx Eye</option>
          
          Crownfall 2024 Collectors Cache
          <option value="Other">Other</option>
        </select>
      </div>

      <!-- Account Filter -->
      <select id="account-filter" class="search-box">
        <option value="all">All Accounts</option>
        <option value="Acc 1">Acc 1</option>
        <option value="Acc 2">Acc 2</option>
        <option value="other">Other / No Account</option>
      </select>

      <div class="cart-icon" onclick="toggleCart()">
        ðŸ›’ <span class="cart-count" id="cartCount">0</span>
      </div>
    </div>

    <div class="scroll-container">
      <div class="grid-container" id="itemsContainer">
        <!--[2]-->
        <div class='item-card' data-account="45916" onclick="addToCart('Leonid Luminosity', 500, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lpw-4n97mbrVBD4kJnz9DZC0P6veqNobqiVVzCVlbZ3trQ4TSzik0R2tW6Ez9ygeH6VOwd1WMd1R7QI5Bjsktz5d7S1jaVDfWU/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lpw-4n97mbrVBD4kJnz9DZC0P6veqNobqiVVzCVlbZ3trQ4TSzik0R2tW6Ez9ygeH6VOwd1WMd1R7QI5Bjsktz5d7S1jaVDfWU/330x192?allow_animated=1' alt='Leonid Luminosity'><div class="quantity-display">X<span class="quantity">2</span></div></div><div class='item-info'><p class='item-name'>Leonid Luminosity</p><p class='item-price'>500</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Pisces Gemini', 350, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kZ854Tx-WbgRBD4kJ_f8SNJ6PfgOPE_cPXLDD-Vmboj4eQ4HH3hxRt362mDm4v7c3ieawZ2CMRzFuJbuw74zIODay4OZw/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kZ854Tx-WbgRBD4kJ_f8SNJ6PfgOPE_cPXLDD-Vmboj4eQ4HH3hxRt362mDm4v7c3ieawZ2CMRzFuJbuw74zIODay4OZw/330x192?allow_animated=1' alt='Pisces Gemini'><div class="quantity-display">X<span class="quantity">3</span></div></div><div class='item-info'><p class='item-name'>Pisces Gemini</p><p class='item-price'>350</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Interstellar Astrarium', 250, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2l974ILm-U3iTRHwjKnh7jZJ7uCnfalSLPGBCWLekL90s7M-THzkzBt-4T7WnN7_dy-UaQAjXptwEbYOtUO4kIe1ZL_nshue1dw2WDBtfg/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2l974ILm-U3iTRHwjKnh7jZJ7uCnfalSLPGBCWLekL90s7M-THzkzBt-4T7WnN7_dy-UaQAjXptwEbYOtUO4kIe1ZL_nshue1dw2WDBtfg/330x192?allow_animated=1' alt='Interstellar Astrarium'><div class="quantity-display">X<span class="quantity">1</span></div></div><div class='item-info'><p class='item-name'>Interstellar Astrarium</p><p class='item-price'>250</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Narwolf Nebula', 200, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lh05pD75l_YTxjzi5rhwi5a_fWrJqE_c6TDXzHGk7wi57Q8HCi1wUtw62_Xm9uudy7EaA8kD8YjR-Ff5xSm0oqwVzSoE8g/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lh05pD75l_YTxjzi5rhwi5a_fWrJqE_c6TDXzHGk7wi57Q8HCi1wUtw62_Xm9uudy7EaA8kD8YjR-Ff5xSm0oqwVzSoE8g/330x192?allow_animated=1' alt='Narwolf Nebula'><div class="quantity-display">X<span class="quantity">3</span></div></div><div class='item-info'><p class='item-name'>Narwolf Nebula</p><p class='item-price'>200</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Reaper of the Waning Veil', 200, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kRw9Zfx-GboRyLllpPf6iNV5vypV7JoKfysAmaCxus457E8Hijiw0p2tW_Un9j6eSqSOAIgCsd5QuRYtRW9wILiNLi0swfYj5UFk3shBOC0Ig/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kRw9Zfx-GboRyLllpPf6iNV5vypV7JoKfysAmaCxus457E8Hijiw0p2tW_Un9j6eSqSOAIgCsd5QuRYtRW9wILiNLi0swfYj5UFk3shBOC0Ig/330x192?allow_animated=1' alt='Reaper of the Waning Veil'><div class="quantity-display">X<span class="quantity">1</span></div></div><div class='item-info'><p class='item-name'>Reaper of the Waning Veil</p><p class='item-price'>200</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Astral Schism', 150, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2ldm4JX15mb0QhX4jZvf8SNJ6Pfgbqc_IqOWWDbBwrkk4eI8GH7mkEoj4D6EmNaqeHPFZwYnDJEkEeUOsA74zIMev12SxA/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2ldm4JX15mb0QhX4jZvf8SNJ6Pfgbqc_IqOWWDbBwrkk4eI8GH7mkEoj4D6EmNaqeHPFZwYnDJEkEeUOsA74zIMev12SxA/330x192?allow_animated=1' alt='Astral Schism'><div class="quantity-display">X<span class="quantity">1</span></div></div><div class='item-info'><p class='item-name'>Astral Schism</p><p class='item-price'>150</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Chrononaut Continuum', 150, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lV95oj65VfmVAnOnZnu6StV-uejV6hsMveWQDGWw-wisrI8H3qxkUp_sjmHmYyocnLBOgIoXMAmQbMJtBe_lNDmY-P8p1uJ6C-Fu34/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lV95oj65VfmVAnOnZnu6StV-uejV6hsMveWQDGWw-wisrI8H3qxkUp_sjmHmYyocnLBOgIoXMAmQbMJtBe_lNDmY-P8p1uJ6C-Fu34/330x192?allow_animated=1' alt='Chrononaut Continuum'><div class="quantity-display">X<span class="quantity">1</span></div></div><div class='item-info'><p class='item-name'>Chrononaut Continuum</p><p class='item-price'>150</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Umbral Expanse', 120, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kN49pX15mbiWQ3wkIXlwi5a_fWrJvE_dfbFDzGWk75z5bhoTn_hwEsm5WvcmdaseXyWaVJ1CMAjE-VcsRSm0oqwEYiv8jE/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kN49pX15mbiWQ3wkIXlwi5a_fWrJvE_dfbFDzGWk75z5bhoTn_hwEsm5WvcmdaseXyWaVJ1CMAjE-VcsRSm0oqwEYiv8jE/330x192?allow_animated=1' alt='Umbral Expanse'><div class="quantity-display">X<span class="quantity">1</span></div></div><div class='item-info'><p class='item-name'>Umbral Expanse</p><p class='item-price'>120</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Star Sage', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kVh9ZXL-VjgRCL9n4Tn-Gxau6X6OvVrdqmXXzGUlO915bgwGijkzUUh5m3cy9j4d3rFOgAlWMAjW6dU5SaUCx8V/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kVh9ZXL-VjgRCL9n4Tn-Gxau6X6OvVrdqmXXzGUlO915bgwGijkzUUh5m3cy9j4d3rFOgAlWMAjW6dU5SaUCx8V/330x192?allow_animated=1' alt='Star Sage'><div class="quantity-display">X<span class="quantity">5</span></div></div><div class='item-info'><p class='item-name'>Star Sage</p><p class='item-price'>100</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Taurid Twilight', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kJ04ZX97mbzVhT9l5Ho6R1X7uCpbeo5cqDBVjbFkOhztOU7SSjilEpy4jvUnNitdX-WbgBxC8MlFudcsBbsjJS5YALf8LCA/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kJ04ZX97mbzVhT9l5Ho6R1X7uCpbeo5cqDBVjbFkOhztOU7SSjilEpy4jvUnNitdX-WbgBxC8MlFudcsBbsjJS5YALf8LCA/330x192?allow_animated=1' alt='Taurid Twilight'><div class="quantity-display">X<span class="quantity">4</span></div></div><div class='item-info'><p class='item-name'>Taurid Twilight</p><p class='item-price'>100</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Photonic Father', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kZ9-5P75FDkfhvwip7l7x1X7uCpbepsI6PKDDDDwrwusrY_HCiwkE5_tTiGy4n4cC_FbwFzDMZ3ROVf4Re4jJS5YOh2WAfX/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2kZ9-5P75FDkfhvwip7l7x1X7uCpbepsI6PKDDDDwrwusrY_HCiwkE5_tTiGy4n4cC_FbwFzDMZ3ROVf4Re4jJS5YOh2WAfX/330x192?allow_animated=1' alt='Photonic Father'><div class="quantity-display">X<span class="quantity">4</span></div></div><div class='item-info'><p class='item-name'>Photonic Father</p><p class='item-price'>100</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Cosmic Cartographer', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lV654r96WbkQA_lkZHy_DJT6uCRZKV_J_XdXzCVlb9047A8FnHnzRwm4m-Azdqhd3OWbgApWMF3F7MIthHrw9buN_SiuVIJYDvQfg/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lV654r96WbkQA_lkZHy_DJT6uCRZKV_J_XdXzCVlb9047A8FnHnzRwm4m-Azdqhd3OWbgApWMF3F7MIthHrw9buN_SiuVIJYDvQfg/330x192?allow_animated=1' alt='Cosmic Cartographer'><div class="quantity-display">X<span class="quantity">3</span></div></div><div class='item-info'><p class='item-name'>Cosmic Cartographer</p><p class='item-price'>100</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Frozen Nova', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lBn-53x5GbpTgvwoZrh7yVeofD3PaU4cKOSWWPIwOgl57I7TCqyk0sktmiDn46tcn6ROFJ1DpchQuQU8k7vA6Y-0kE/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lBn-53x5GbpTgvwoZrh7yVeofD3PaU4cKOSWWPIwOgl57I7TCqyk0sktmiDn46tcn6ROFJ1DpchQuQU8k7vA6Y-0kE/330x192?allow_animated=1' alt='Frozen Nova'><div class="quantity-display">X<span class="quantity">4</span></div></div><div class='item-info'><p class='item-name'>Frozen Nova</p><p class='item-price'>100</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Flame of Origin', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lB59Yrx1VbhfhLjl5Hp8x1X7uCpbeppcvSRXmTDwrkgteJsTivhwBgl6zuAy4uhIimUOAchAsZyRbRf5BC9jJS5YOrUlMUi/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lB59Yrx1VbhfhLjl5Hp8x1X7uCpbeppcvSRXmTDwrkgteJsTivhwBgl6zuAy4uhIimUOAchAsZyRbRf5BC9jJS5YOrUlMUi/330x192?allow_animated=1' alt='Flame of Origin'><div class="quantity-display">X<span class="quantity">3</span></div></div><div class='item-info'><p class='item-name'>Flame of Origin</p><p class='item-price'>100</p></div></div>
<div class='item-card' data-account="45916" onclick="addToCart('Graviton Blackguard', 100, 'https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lFn9ZH9_lbpfh_9n5Xr-jda_faRZKV_J_XdC2LIlOpw6eNoTn_qzUh2527Rm42udX6UP1QoCsN3TbMDtETpktPuMPSiuVL65AnFcQ/330x192?allow_animated=1','45916')"><div class='item-image'><img src='https://community.fastly.steamstatic.com/economy/image/i0CoZ81Ui0m-9KwlBY1L_18myuGuq1wfhWSaZgMttydbPaERSR0Wqmu7LAocGJazz1j_VPnAwvWoIX6a2lFn9ZH9_lbpfh_9n5Xr-jda_faRZKV_J_XdC2LIlOpw6eNoTn_qzUh2527Rm42udX6UP1QoCsN3TbMDtETpktPuMPSiuVL65AnFcQ/330x192?allow_animated=1' alt='Graviton Blackguard'><div class="quantity-display">X<span class="quantity">1</span></div></div><div class='item-info'><p class='item-name'>Graviton Blackguard</p><p class='item-price'>100</p></div></div>

        
        
        
      </div>
    </div>

    <!-- Shopping Cart Modal -->
    <div id="cartModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" onclick="toggleCart()">&times;</span>
          <h2>Order Summary</h2>
        </div>
        <div class="modal-body">
          <div id="cartItems"></div>
          <div id="cartTotal"></div>
          <button class="checkout-btn" onclick="checkout()">
            Proceed to Checkout
          </button>
        </div>
      </div>
    </div>

    <script>
      // Initialize cart
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      window.onload = function () {
        updateCartDisplay(); // show existing cart when page loads
      };

      // Time input handling
      function showTimeInput() {
        const timeText = document.getElementById("updateTimeText");
        const timeInput = document.getElementById("updateTimeInput");
        timeText.style.display = "none";
        timeInput.style.display = "block";
        timeInput.value = timeText.textContent;
        timeInput.focus();
      }

      function hideTimeInput() {
        const timeText = document.getElementById("updateTimeText");
        const timeInput = document.getElementById("updateTimeInput");
        timeText.style.display = "inline";
        timeInput.style.display = "none";
        if (timeInput.value.trim()) {
          timeText.textContent = timeInput.value;
        }
      }

      function handleKeyPress(event) {
        if (event.key === "Enter") {
          hideTimeInput();
        }
      }

      // Function to add to cart with ETOP price
      function addToCart(name, price, imageUrl, account) {
        const etopPrice = getEtopPrice(name);
        cart.push({ name, price, imageUrl, etopPrice, account });
        // Save cart to localStorage
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay(); // Ensure this is called to update the UI
        alert(`Added ${name} to cart!`);
      }

      // Function to get ETOP price based on item name
      function getEtopPrice(name) {
        const etopPrices = {
          // [3]
          'Leonid Luminosity': 0,
'Pisces Gemini': 0,
'Interstellar Astrarium': 0,
'Narwolf Nebula': 0,
'Reaper of the Waning Veil': 0,
'Astral Schism': 0,
'Chrononaut Continuum': 0,
'Umbral Expanse': 0,
'Star Sage': 0,
'Taurid Twilight': 0,
'Photonic Father': 0,
'Cosmic Cartographer': 0,
'Frozen Nova': 0,
'Flame of Origin': 0,
'Graviton Blackguard': 0,

          
          
          

        };
        return etopPrices[name] || 0;
      }

      // Updated cart display function
      function updateCartDisplay() {
        const cartCount = document.getElementById("cartCount");
        cartCount.textContent = cart.length; // Update cart count

        const cartItems = document.getElementById("cartItems");
        cartItems.innerHTML = ""; // Clear existing items

        let total = 0;
        let etopTotal = 0;

        cart.forEach((item, index) => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "cart-item";
          itemDiv.innerHTML = `
            <img src="${item.imageUrl}" alt="${item.name}" class="cart-item-image">
            <div class="cart-item-details">
                <span>${item.name}</span>
                <span>P${item.price}</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px;">
                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                    <span class="account-info">(${item.account})</span> <!-- Account info on the left -->
                    <span style="font-size: 16px;">$${item.etopPrice}</span> <!-- Value below -->
                </div>
                <button onclick="removeFromCart(${index})">Remove</button> <!-- Remove button -->
            </div>
        `;
          cartItems.appendChild(itemDiv);
          total += parseFloat(item.price) || 0;
          etopTotal += parseFloat(item.etopPrice);
        });

        const ratio = etopTotal > 0 ? total / etopTotal : 0;

        document.getElementById("cartTotal").innerHTML = `
        <h3>Total: P${total}</h3>
        <h3 style="color: #4CAF50; font-size: 18px;">Total ETOP: $${etopTotal.toFixed(
          2
        )}</h3>
        <h4 style="color: #808080; margin-top: 10px;">Rate: ${ratio.toFixed(
          2
        )}</h4>
    `;
      }

      function removeFromCart(index) {
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay();
      }

      function toggleCart() {
        const modal = document.getElementById("cartModal");
        modal.style.display =
          modal.style.display === "block" ? "none" : "block";
      }

      function checkout() {
        if (cart.length === 0) {
          alert("Your cart is empty!");
          return;
        }

        let summary = "Order Summary:\n\n";
        let total = 0;

        cart.forEach((item) => {
          summary += `${item.name}: P${item.price}\n`;
          total += parseFloat(item.price) || 0;
        });

        summary += `\nTotal: P${total}`;
        alert(summary);

        // Clear cart after checkout
        cart = [];
        localStorage.removeItem("cart");
        updateCartDisplay();
        toggleCart();
      }

      const heroItemMapping = {
        // [4]
        'Cosmic Heroes Hoard Treasure' : ['Star Sage','Taurid Twilight','Photonic Father','Cosmic Cartographer','Narwolf Nebula','Photax Fluttercat','Frozen Nova','Flame of Origin','Pisces Gemini','Interstellar Astrarium','Graviton Blackguard','Leonid Luminosity','Reaper of the Waning Veil','Umbral Expanse','Astral Schism','Chrononaut Continuum','Intergalactic Orbliterator'],
'Crownfall 2024 Collectors Cache' : ['Bloodmoon Stalker','Mecha Nyx','Colossal Terrorpin','Elegy of the Reaper','Lotus of the Mountain Bear Clan','Dread of Night','Ardalan Arms Race','Faithful Fortune','Darkblade Adept','Blackwing Bandolera'],
'Crownfall 2024 Collectors Cache II' : ['Angler in the Abyss'],
'Dead Reckoning Chest' : ['Expired Gun','Songs of the Soulfinch','Dying Light','Darkwater Dominion','Fruits of Wane','Feasts of Fear','Gilded Decay','Ruby-ridged Recluse'],
'Frostivus 2017 Treasure' : ['Frostshard Ascendant'],
'Treasure of the Forgotten Myth' : ['Inscribed Rider of Avarice'],
'Treasure of the Onyx Eye' : ['Firestarter'],

        
        
      };

      const searchBox = document.getElementById("searchBox");
      const heroFilter = document.getElementById("heroFilter");
      const accountFilter = document.getElementById("account-filter");
      const items = document.querySelectorAll(".item-card");

      // Reusable filter function
      function applyFilters() {
        const searchTerm = searchBox.value.toLowerCase();
        const selectedHero = heroFilter.value;
        const selectedAccount = accountFilter.value;

        items.forEach((item) => {
          const itemName = item
            .querySelector(".item-name")
            .textContent.toLowerCase();
          const account = item.dataset.account || "other";

          let show = true;

          // ðŸ”Ž Search filter
          if (searchTerm && !itemName.includes(searchTerm)) {
            show = false;
          }

          // ðŸ¦¸ Hero filter
          if (selectedHero !== "all") {
            if (selectedHero === "Other") {
              let belongsToSpecificHero = false;
              for (const hero in heroItemMapping) {
                if (
                  heroItemMapping[hero].some((heroItem) =>
                    itemName.includes(heroItem.toLowerCase())
                  )
                ) {
                  belongsToSpecificHero = true;
                  break;
                }
              }
              if (belongsToSpecificHero) show = false;
            } else {
              const heroItems = heroItemMapping[selectedHero] || [];
              if (
                !heroItems.some((heroItem) =>
                  itemName.includes(heroItem.toLowerCase())
                )
              ) {
                show = false;
              }
            }
          }

          // ðŸ‘¤ Account filter
          if (selectedAccount !== "all" && account !== selectedAccount) {
            show = false;
          }

          // Final show/hide
          item.style.display = show ? "" : "none";
        });
      }

      // Attach all listeners to the same function
      searchBox.addEventListener("input", applyFilters);
      heroFilter.addEventListener("change", applyFilters);
      accountFilter.addEventListener("change", applyFilters);
    </script>
  </body>
</html>


